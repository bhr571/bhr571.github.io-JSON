<!DOCTYPE html>>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>JSON-tehtävät</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<style>
  .custom-toggler .navbar-toggler-icon { background-image: url("data:image/svg+xml;charset=utf8,%3Csvg viewBox='0 0 32 32' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath stroke='rgba(255,102,203, 0.5)' stroke-width='2' stroke-linecap='round' stroke-miterlimit='10' d='M4 8h24M4 16h24M4 24h24'/%3E%3C/svg%3E"); }
.nav-item .dropdown-menu a:hover {
.nav-link.active {

color: yellow !important;

}
color: black !important;

background: yellow !important;

cursor: pointer;

}
.carousel-inner img {

width: 100%; 

margin: auto;

min-height:200px; }
</style>
</head>

<body>
<main>
  <nav class="navbar  navbar-expand-sm bg-warning navbar-warning">

<div class="container-fluid">

<button class="navbar-toggler custom-toggler" type="button"

data-toggle="collapse" data-target="#navbarSupportedContent"

aria-controls="navbarSupportedContent" aria-expanded="false"

aria-label="Toggle navigation">

<span class="navbar-toggler-icon"></span>

</button>
<span class="navbar-toggler-icon"></span>

</button>
<body data-bs-spy="scroll" data-bs-target=".navbar" data-bs-offset="50"></body>

<div class="collapse navbar-collapse" id="collapsibleNavbar">

<ul class="navbar-nav">

<li class="nav-item">

<a class="nav-link" href="index.html">Aloitussivu</a>

</li>
<li class="nav-item">

<a class="nav-link" href="toteutus.html">Oma toteutus</a>

</li>

<li class="nav-item">

<a class="nav-link" href="Pokemon.html">Pokemon</a>

</li>
<li class="nav-item">

<a class="nav-link" href="saa.html">Sää</a>

</li>
</li>


</ul>

</div>

</div>

</nav>
<div>
<h1>Sää Helsingissä</h1>
    <p>
        <button onclick="haeSaa()">Hae Helsingin sää</button><br>
    </p>
<div id="paiva"></div>
<div id="kuva"></div>
<div id="kuvaus"></div>
<div id="lampotila"></div>
<div id="vastaus"></div>
<div id="tuuli"></div>
</div>
<script>
// Luodaan ensin funktio, joka hakee säätiedot apista. Samalla se tulostaa kellonajan näkymiin, ja välittää JSON:in sää-funktiolle
    function haeSaa(){
const d = new Date(); 
let tunnit = d.getHours();
let minuutit = d.getMinutes();
if (minuutit > 10){
document.getElementById("paiva").innerHTML = "Sää kello " + tunnit + ":" + minuutit;
}
if (minuutit <10){
document.getElementById("paiva").innerHTML = "Sää kello " + tunnit + ":0" + minuutit;
// Olisi varmaan ollut valmismetodejakin saada kellonaika XX:XX muotoon, mutta tämän sai luotua melko helposti. If lause on sitä varten, että kellonaika 12:09 ei näyttäytyisi muodossa 12:9
}
        fetch(`https://api.openweathermap.org/data/2.5/weather?id=658225&appid=665ecd56dfc08dbb50feb8b8f5034e28&lang=fi&units=metric`)
    .then(function (response) {
        return response.json();
    })
    .then (function (responseJson){
    saa(responseJson);
    })
    .catch(function (error) {
    document.getElementById("vastaus").innerHTML = "<p>Tietoa ei pystytä hakemaan</p>"
    })
}
    function saa(obj) {
        const koodi = obj.weather[0].icon;
        const url = `https://openweathermap.org/img/wn/${koodi}@2x.png`;
        document.getElementById("kuva").innerHTML = `<img src="${url}">`;
        document.getElementById("kuvaus").innerHTML = "<b>Sää: <br>" + obj.weather[0].description + "</b>";
        document.getElementById("lampotila").innerHTML = "<br><b>Lämpötila: <br>" + obj.main.temp + "°C</b><br>";
        document.getElementById("tuuli").innerHTML = "<br><b>Tuuli: <br>" + obj.wind.speed + " m/s</b><br>";
 // saa-funktio tulostaa loput halutut tiedot (kellonaika tuli jo aiemmassa funktiossa)
    }
</script>
</main>
</body>
</html>